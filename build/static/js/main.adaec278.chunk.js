(this["webpackJsonpweather-forecast"]=this["webpackJsonpweather-forecast"]||[]).push([[0],[,,,,,function(e){e.exports=JSON.parse('{"a":[{"name":"\u0421\u0430\u043c\u0430\u0440\u0430","id":1,"coordinates":{"lat":53.195873,"lon":50.100193}},{"name":"\u0422\u043e\u043b\u044c\u044f\u0442\u0442\u0438","id":2,"coordinates":{"lat":53.507836,"lon":49.420393}},{"name":"\u0421\u0430\u0440\u0430\u0442\u043e\u0432","id":3,"coordinates":{"lat":51.533557,"lon":46.034257}},{"name":"\u041a\u0430\u0437\u0430\u043d\u044c","id":4,"coordinates":{"lat":55.796127,"lon":49.106405}},{"name":"\u041a\u0440\u0430\u0441\u043d\u043e\u0434\u0430\u0440","id":5,"coordinates":{"lat":45.03547,"lon":38.975313}}]}')},function(e){e.exports=JSON.parse('{"a":{"01d":{"url":"./images-icons/01d@2x.png","alt":"clear sky"},"02d":{"url":"./images-icons/02d@2x.png","alt":"few clouds"},"03d":{"url":"./images-icons/03d@2x.png","alt":"scattered clouds"},"04d":{"url":"./images-icons/04d@2x.png","alt":"broken clouds"},"09d":{"url":"./images-icons/09d@2x.png","alt":"shower rain"},"10d":{"url":"./images-icons/10d@2x.png","alt":"rain"},"11d":{"url":"./images-icons/11d@2x.png","alt":"thunderstorm"},"13d":{"url":"./images-icons/13d@2x.png","alt":"snow"},"50d":{"url":"./images-icons/50d@2x.png","alt":"mist"},"01n":{"url":"./images-icons/01n@2x.png","alt":"clear sky"},"02n":{"url":"./images-icons/02n@2x.png","alt":"few clouds"},"03n":{"url":"./images-icons/03n@2x.png","alt":"scattered clouds"},"04n":{"url":"./images-icons/04n@2x.png","alt":"broken clouds"},"09n":{"url":"./images-icons/09n@2x.png","alt":"shower rain"},"10n":{"url":"./images-icons/10n@2x.png","alt":"rain"},"11n":{"url":"./images-icons/11n@2x.png","alt":"thunderstorm"},"13n":{"url":"./images-icons/13n@2x.png","alt":"snow"},"50n":{"url":"./images-icons/50n@2x.png","alt":"mist"}}}')},,,,function(e,t,n){},,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";n.r(t);var a,c=n(1),r=n.n(c),s=n(11),i=n.n(s),o=(n(16),n(8)),l=(n(10),n(6)),u=n(5),d=function(e){return Math.round(e-273)},j=function(e){return new Date(1e3*e).toISOString().substr(0,10)},h=function(e){return u.a[e]},p=n(0),b=function(e){var t=e.cardInfo,n=j(t.dt),a=t.weather[0].icon,c=d(t.temp.day);return Object(p.jsxs)("div",{className:"weather-card-item",children:[Object(p.jsx)("time",{className:"time",children:n}),Object(p.jsx)("img",{className:"weather-icon",src:l.a[a].url,alt:l.a[a].alt}),Object(p.jsxs)("p",{className:"temperature",children:["".concat(c),"\xb0"]})]})},f=(n(18),Object(c.createContext)(null)),x=function(){var e=Object(c.useContext)(f),t=e.loading,n=e.weathers,a=e.selectedCityIndex,r=e.getSevenDaysForecast,s=Object(c.useState)(0),i=Object(o.a)(s,2),l=i[0],u=i[1],d=n&&n.slice(l,l+3);return Object(c.useEffect)((function(){if(a>=0){var e=h(a);r(e.coordinates)}}),[a]),Object(p.jsx)(p.Fragment,{children:a>=0?Object(p.jsx)("div",{className:"weather-card-list",children:t?Object(p.jsx)("p",{className:"loading",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):Object(p.jsxs)(p.Fragment,{children:[0===l?null:Object(p.jsx)("button",{className:"weather-card-list__arrow-left",onClick:function(){return u(l-1)}}),d.map((function(e){return Object(p.jsx)(b,{cardInfo:e},e.dt)})),l>3?null:Object(p.jsx)("button",{className:"weather-card-list__arrow-right",onClick:function(){return u(l+1)}})]})}):Object(p.jsx)("div",{className:"weather-card-blank",children:Object(p.jsx)("p",{className:"weather-card-blank__p",children:"Fill in all the fields and the weather will be displayed"})})})},O=(n(19),n(20),function(e){var t=e.value,n=e.cities,a=e.onChange;return Object(p.jsxs)("select",{className:"select",onChange:function(e){a(+e.target.value)},value:t,children:[Object(p.jsx)("option",{selected:!0,disabled:!0,hidden:!0,value:"",children:"Select city"}),n&&n.map((function(e,t){var n=e.id,a=e.name;return Object(p.jsx)("option",{value:t,children:a},n)}))]})}),m=function(){var e=Object(c.useContext)(f),t=e.selectCityIndex,n=e.selectedCityIndex;return Object(p.jsx)(O,{value:n,cities:u.a,onChange:function(e){t(e)}})},g=function(){return Object(p.jsxs)("div",{className:"forecast-container",children:[Object(p.jsx)("h2",{className:"forecast-container__h2",children:"7 Days Forecast"}),Object(p.jsx)("form",{action:"#",className:"form-box",children:Object(p.jsx)(m,{})}),Object(p.jsx)(x,{})]})},v=function(e){var t,n,a=e.cardInfo,c=j(a.dt),r=a.weather[0].icon,s=d(a.temp);return Object(p.jsxs)("div",{className:"weather-card-item",children:[Object(p.jsx)("time",{className:"time",children:c}),Object(p.jsx)("img",{className:"weather-icon",src:null===(t=l.a[r])||void 0===t?void 0:t.url,alt:(null===(n=l.a[r])||void 0===n?void 0:n.alt)||"weather-icon"}),Object(p.jsxs)("p",{className:"temperature",children:["".concat(s),"\xb0"]})]})},w=(n(21),function(){var e=Object(c.useContext)(f),t=e.selectedDate,n=e.selectDate,a=Date.now();return Object(p.jsx)("input",{type:"date",className:"select",name:"date",placeholder:"date",min:"2017-04-01",max:a,value:t,onChange:function(e){n(e.target.value)}})}),y=(n(22),function(){var e=Object(c.useContext)(f),t=e.selectCityOneIndex,n=e.selectedCityOneIndex;return Object(p.jsx)(O,{value:n,cities:u.a,onChange:function(e){t(e),console.log(e)}})}),C=function(){var e=Object(c.useContext)(f),t=(e.loading,e.weather),n=e.selectedCityOneIndex,a=e.selectedDate,r=e.getOneDayForecast;return Object(c.useEffect)((function(){if(n>=0&&a){var e=h(n),t=(new Date(a).getTime()/1e3).toString();r(e.coordinates,t)}}),[n,a]),Object(p.jsxs)("div",{className:"forecast-container",children:[Object(p.jsx)("h2",{className:"forecast-container__h2",children:"Forecast for a Date in the Past"}),Object(p.jsxs)("form",{action:"#",className:"form-box",children:[Object(p.jsx)(y,{}),Object(p.jsx)(w,{})]}),t?Object(p.jsx)(v,{cardInfo:t}):Object(p.jsx)("div",{className:"weather-card-blank",children:Object(p.jsx)("p",{className:"weather-card-blank__p",children:"Fill in all the fields and the weather will be displayed"})})]})},N=n(4),I=n.n(N),E=n(7),D=n(3),_=n(2),k="SELECT_DATE",S="GET_WEATHERS",T="GET_WEATHER",F="SET_LOADING",L="SET_STOP_LOADING",A="SELECT_CITY_INDEX",P="SELECT_CITY_ONE_INDEX",G=(a={},Object(D.a)(a,A,(function(e,t){var n=t.payload;return Object(_.a)(Object(_.a)({},e),{},{selectedCityIndex:n})})),Object(D.a)(a,P,(function(e,t){var n=t.payload;return Object(_.a)(Object(_.a)({},e),{},{selectedCityOneIndex:n})})),Object(D.a)(a,S,(function(e,t){var n=t.payload;return Object(_.a)(Object(_.a)({},e),{},{weathers:n})})),Object(D.a)(a,T,(function(e,t){var n=t.payload;return Object(_.a)(Object(_.a)({},e),{},{weather:n})})),Object(D.a)(a,F,(function(e){return Object(_.a)(Object(_.a)({},e),{},{loading:!0})})),Object(D.a)(a,L,(function(e){return Object(_.a)(Object(_.a)({},e),{},{loading:!1})})),Object(D.a)(a,k,(function(e,t){var n=t.payload;return Object(_.a)(Object(_.a)({},e),{},{selectedDate:n})})),Object(D.a)(a,"DEFAULT",(function(e){return e})),a),J=function(e,t){return(G[t.type]||G.DEFAULT)(e,t)},R="3271c2ed7c22a57273a4549fd585d36f",W="https://api.openweathermap.org/data/2.5",B="".concat(W,"/onecall"),H="".concat(W,"/onecall/timemachine"),M=function(){var e=Object(E.a)(I.a.mark((function e(t){var n,a,c,r,s;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.lat,a=t.lon,c="".concat(B,"?lat=").concat(n,"&lon=").concat(a,"&appid=").concat(R),e.next=5,fetch(c);case 5:return r=e.sent,e.next=8,r.json();case 8:return(s=e.sent).daily.length=7,e.abrupt("return",s.daily);case 13:throw e.prev=13,e.t0=e.catch(0),new Error(e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(E.a)(I.a.mark((function e(t,n){var a,c,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a="".concat(H,"?lat=").concat(t.lat,"&lon=").concat(t.lon,"&dt=").concat(n,"&appid=").concat(R),e.next=4,fetch(a);case 4:return c=e.sent,e.next=7,c.json();case 7:return r=e.sent,e.abrupt("return",r.current);case 11:throw e.prev=11,e.t0=e.catch(0),new Error(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),X=function(e){var t=e.children,n={selectedCityIndex:void 0,selectedCityOneIndex:void 0,selectedDate:new Date(0),loading:!1,weathers:[],weather:null},a=Object(c.useReducer)(J,n),r=Object(o.a)(a,2),s=r[0],i=r[1],l=function(){var e=Object(E.a)(I.a.mark((function e(t){var n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(),e.next=4,M(t);case 4:n=e.sent,i({type:S,payload:n}),j(),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(0),j(),new Error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(E.a)(I.a.mark((function e(t,n){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,d(),e.next=4,U(t,n);case 4:a=e.sent,i({type:T,payload:a}),j(),e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(0),j(),new Error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),d=function(){return i({type:F})},j=function(){return i({type:L})},h=s.selectedCityIndex,b=s.selectedCityOneIndex,x=s.selectedDate,O=s.loading,m=s.weathers,g=s.weather;return Object(p.jsx)(f.Provider,{value:{getSevenDaysForecast:l,getOneDayForecast:u,selectCityIndex:function(e){i({type:A,payload:e})},selectCityOneIndex:function(e){i({type:P,payload:e})},selectDate:function(e){return i({type:k,payload:e})},selectedCityIndex:h,selectedCityOneIndex:b,selectedDate:x,loading:O,weathers:m,weather:g},children:t})};var Y=function(){return Object(p.jsx)(X,{children:Object(p.jsxs)("main",{children:[Object(p.jsx)("h1",{className:"header-title",children:"Weather forecast"}),Object(p.jsxs)("div",{className:"forecast-wrapper",children:[Object(p.jsx)(g,{}),Object(p.jsx)(C,{})]}),Object(p.jsx)("p",{className:"footer-title",children:"C \u043b\u044e\u0431\u043e\u0432\u044c\u044e \u043e\u0442 mercury development"})]})})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,25)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};i.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(Y,{})}),document.getElementById("root")),q()}],[[24,1,2]]]);
//# sourceMappingURL=main.adaec278.chunk.js.map